{% load static  %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Cempaka Foundation - Sponsor</title>

         <!-- Bootstrap CSS CDN -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- Our Custom CSS -->
        <link rel="stylesheet" href="{% static 'sponsor_dashboard/css/style5.css' %}">
    </head>
    <body>



        <div class="wrapper">
            <!-- Sidebar Holder -->
            <nav id="sidebar">
                <div class="sidebar-header">
                    <h3>Cempaka Foundation</h3>
                </div>

                <ul class="list-unstyled components">
                    <p>{{ user.sponsor_name }}</p>
                    <li>
                        <a href="{% url 'dashboard_profile' %}">Profile</a>
                    </li>
                    <li style="background-color:white;color:#7388D5">
                        <a href="{% url 'dashboard_maps' %}">Tree Maps Location</a>
                    </li>
                    <li>
                        <a href="{% url 'dashboard_gallery' %}">Gallery</a>
                    </li>
                    <li>
                        <a href="{% url 'dashboard_review' %}">Write Review</a>
                    </li>
                </ul>

                <ul class="list-unstyled CTAs">
                    <li><a href="{% url 'landingpage' %}" class="download">Back to home</a></li>
                    <li><a href="{% url 'logout' %}" class="article">Log Out</a></li>
                </ul>
            </nav>

            <!-- Page Content Holder -->
            <div id="content">

                <nav class="navbar navbar-default">
                    <div class="container-fluid">

                        <div class="navbar-header">
                            <button type="button" id="sidebarCollapse" class="navbar-btn">
                                <span></span>
                                <span></span>
                                <span></span>
                            </button>
                            <p>Maps</p>
                        </div>

                    </div>
                </nav>
                <div class="container" id="bs-example-navbar-collapse-1">
                    {% if not fail %}
                        <select name="year" id="year" class="form-control" >
                        {%for year in years%}
                            {%if year == years|last%}
                                <option value="{{forloop.counter0}}" selected>{{year}}</option>
                            {% else %}
                                <option value="{{forloop.counter0}}">{{year}}</option>
                            {%endif%}
                        {%endfor%}
                        </select>
                        {%with map=maps|last %}
                        <iframe src="{{ map.urlmap }}" width="100%" height="100%" id='map'></iframe>
                        {%endwith%}
                    {% else %}
                        <h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">Sorry, There are no tree being plant yet</h1>
                        <h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">
                            Please contact the <i>Cempaka Foundation</i> <a href="{% url 'landingpage' %}#contact">
                            <i><u>here</u></i>
                        </a>
                        </h1>
                    {% endif %}
                </div>
            </div>
        </div>





        <!-- jQuery CDN -->
         <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
         <!-- Bootstrap Js CDN -->
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

         <script type="text/javascript">
             $(document).ready(function () {
                 $('#sidebarCollapse').on('click', function () {
                     $('#sidebar').toggleClass('active');
                     $(this).toggleClass('active');
                 });
             });
         </script>
         <script type="text/javascript">
             map=document.getElementById('map')
             selector=document.getElementById('year')
             obj=JSON.parse('{{json|safe}}')
             year.addEventListener('change', (event) => {
                map.src=obj[selector.value].fields.urlmap

                });
         </script>
    </body>
</html>
